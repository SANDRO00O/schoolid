<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/logo-16.png">
  <link rel="stylesheet" href="assets/css/all.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/logo-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/logo-180.png">
  <meta name="author" content="karrar nazim">
  <meta name="publisher" content="karrar nazim">
  <title>منشئ هوية التلميذ العراقي</title>
  <!-- Meta Tags تعريفية -->
  <meta name="description" content="أنشئ بطاقة هوية مدرسية عراقية لتلميذك بسهولة مجانًا وباللغة العربية. أداة إلكترونية سهلة الاستخدام تدعم إضافة صورة وبيانات التلميذ.">
  <meta name="keywords" content="هوية, بطاقة, التلميذ, المدرسة, العراق, منشئ هوية, بطاقة مدرسية, تصميم هوية, هوية تلميذ, تلميذ عراقي">
  <meta name="author" content="كرار ناظم">
  <meta name="robots" content="index, follow">
  <meta name="language" content="ar">
  <meta name="theme-color" content="#1F1E1C">
  
  <link rel="stylesheet" href="assets/css/style.css?rev=19">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8868791430475444" crossorigin="anonymous"></script>
</head>

<body class="body">
  <header class="header">
    <div class="menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <nav id="nav">
      <a href="index.html">الرئيسية <i class="fas fa-home"></i></a>
      <a href="assets/links/About.html">حول الموقع <i class="fas fa-info-circle"></i></a>
      <a href="assets/links/privacy.html">سياسة الخصوصية <i class="fas fa-user-shield"></i></a>
      <a href="https://karrarnazim.space">تواصل معي <i class="fas fa-envelope"></i></a>
    </nav>
    <a href="index.html" class="logo">
      منشئ هوية التلميذ العراقي
      <img class="mangasr" src="/assets/images/logo.svg" alt="شعار موقع منشئ هوية التلميذ العراقي">
    </a>
  </header>
  <div id="loading" style="display: none;">
    <div id="container" class="loader"></div>
  </div>
  <div class="container">
    
    <div class="contant">
      <h1>انشاء بطاقة الهوية المدرسية</h1>
      <form id="generateForm" enctype="multipart/form-data">
        <label for="name">
          <i class="fas fa-user"></i>
          الأسم الثلاثي:
        </label>
        <input type="text" id="name" name="name" placeholder="أدخل اسمك الثلاثي">
        
        <label for="grade">
          <i class="fas fa-graduation-cap"></i>
          الصف:
        </label>
        <input type="text" id="grade" name="grade" placeholder="أدخل الصف الدراسي">
        <label for="school">
          <i class="fas fa-school"></i>
          المدرسة:
        </label>
        <input type="text" id="school" name="school" placeholder="أدخل اسم المدرسة">
        
        <label for="place">
          <i class="fas fa-map-marker-alt"></i>
          السكن:
        </label>
        <input type="text" id="place" name="place" placeholder="أدخل عنوان السكن">
        <label for="phone">
          <i class="fas fa-phone"></i>
          رقم الهاتف:
        </label>
        <input type="number" id="phone" name="phone" placeholder="أدخل رقم الهاتف">
        
        <div class="gender-buttons">
          <button type="button" class="gender-btn selected" data-gender="female">
            <img src="/assets/images/female.svg" alt="ايقونة أنثى"> أنثى
          </button>
          <button type="button" class="gender-btn" data-gender="male">
            <img src="/assets/images/male.svg" alt="ايقونة ذكر"> ذكر
          </button>
        </div>
        
        <label class="image" for="image">
          <i class="fas fa-camera"></i>
          <input type="file" id="image" name="image" accept="image/*" required>
          اضغط لإضافة صورة للتلميذ/ة
          <p id="fileName"></p>
        </label>
        
        <button class="button" type="submit">
          <i class="fas fa-id-card"></i> انشاء الهوية
        </button>
      </form>
      
      <canvas id="id-card-canvas" width="1011" height="639"></canvas>
      <button class="button" id="download-btn" style="display: none;">
        <i class="fas fa-download"></i>
        تحميل الهوية
      </button>
      
      <button class="button" id="share-btn" style="display: none;">
        <i class="fas fa-share"></i>
        مشاركة
      </button>
    </div>
    
    <section class="instructions-section container">
      <div class="contant">
        <h2><i class="fas fa-info-circle"></i> تعليمات استخدام منشئ الهوية المدرسية</h2>
        <ul class="instructions-list">
          <li><strong>املأ جميع الحقول:</strong> تأكد من إدخال الاسم الثلاثي، الصف، اسم المدرسة، عنوان السكن، ورقم الهاتف بشكل صحيح.</li>
          <li><strong>تحديد الجنس:</strong> اختر الجنس المناسب (ذكر أو أنثى) بالضغط على الزر المقابل.</li>
          <li><strong>تحميل صورة التلميذ:</strong> اضغط على خانة الصورة واختر صورة واضحة للوجه. يُفضل أن تكون الخلفية بيضاء.</li>
          <li><strong>إنشاء الهوية:</strong> بعد ملء المعلومات، اضغط على زر <strong>“إنشاء الهوية”</strong> لمعاينة البطاقة.</li>
          <li><strong>تحميل الهوية:</strong> بمجرد ظهور البطاقة، سيظهر زر التحميل. اضغط عليه لحفظها على جهازك.</li>
          <li><strong>مشاركة البطاقة:</strong> يمكنك مشاركة الهوية مباشرة عبر الزر المخصص لذلك.</li>
          <li><strong>دقة الصورة:</strong> للحصول على أفضل نتيجة، استخدم صورة بجودة عالية وأبعاد مربعة تقريبًا.</li>
          <li><strong>المتصفحات المدعومة:</strong> الموقع يعمل بكفاءة على أحدث إصدارات Chrome وFirefox وEdge.</li>
          <li><strong>الأمان والخصوصية:</strong> لا يتم حفظ أي بيانات أو صور على السيرفر، كل العمليات تتم في جهازك فقط.</li>
        </ul>
      </div>
    </section>
    
    <!-- ====== قسم الأسئلة الشائعة (تم تحديثه مع إصلاح الارتفاع) ====== -->
    <section id="faq" class="faq-section container" aria-labelledby="faq-heading">
      <div class="contant">
        <h2 id="faq-heading"><i class="fas fa-question-circle"></i> الأسئلة الشائعة</h2>
        
        <div class="faq-list" role="list">
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq1">
                <span>هل يتم حفظ صور التلميذ على السيرفر؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq1" class="faq-answer" role="region" aria-hidden="true">
              لا، كل العمليات تتم محليًا على جهازك باستخدام الـ canvas. لا نرفع الصور أو البيانات إلى أي سيرفر.
            </div>
          </div>
          
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq2">
                <span>ما صيغ الصور المدعومة؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq2" class="faq-answer" role="region" aria-hidden="true">
              يدعم الموقع صيغ الصورة الشائعة مثل JPG وPNG وWEBP. يُفضل استخدام صورة مربعة الجودة العالية للحصول على نتيجة أفضل.
            </div>
          </div>
          
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq3">
                <span>هل يمكن تعديل الهوية بعد تحميلها؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq3" class="faq-answer" role="region" aria-hidden="true">
              يمكنك إنشاء نسخة جديدة بتعديل الحقول وإعادة تحميلها. حالياً لا يوجد حفظ للإصدارات على السيرفر.
            </div>
          </div>
          
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq4">
                <span>كيف أطبع البطاقة بحجم مناسب للطباعة؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq4" class="faq-answer" role="region" aria-hidden="true">
              بعد تحميل الصورة افتحها على جهازك ثم استخدم خيار الطباعة في المتصفح مع ضبط المقاسات (عادةً استخدم حجم صورة 1011×639 px أو اختر "عدم تغيير الحجم").
            </div>
          </div>
          
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq5">
                <span>هل يعمل الموقع على الهواتف؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq5" class="faq-answer" role="region" aria-hidden="true">
              نعم، صُمم ليعمل على المتصفحات الحديثة على الهواتف لكنه يعمل بشكل أفضل على متصفح Chrome و Firefox بإصدارات حديثة.
            </div>
          </div>
          
          <div class="faq-item">
            <h3>
              <button class="faq-question" aria-expanded="false" aria-controls="faq6">
                <span>ماذا أفعل إن لم يظهر زر التحميل بعد الإنشاء؟</span>
                <i class="fas fa-chevron-down faq-icon" aria-hidden="true"></i>
              </button>
            </h3>
            <div id="faq6" class="faq-answer" role="region" aria-hidden="true">
              تأكد من أن جميع الحقول مُملأة وأن الصورة تم تحميلها. أيضاً جرّب تحديث الصفحة أو استخدام متصفح آخر إذا استمرت المشكلة.
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- ====== نهاية الأسئلة الشائعة ====== -->
  </div>
  
  <footer class="footer">
    <div id="wcb" class="carbonbadge wcb"></div>
    <script src="https://unpkg.com/website-carbon-badges@1.1.3/b.min.js" defer></script>
    <img src="https://app.greenweb.org/api/v3/greencheckimage/schoolid.karrarnazim.space?nocache=true" alt="This website runs on green hosting - verified by thegreenwebfoundation.org" width="200px" height="95px">
    <div class="links">
      <a href="https://karrarnazim.space">تواصل معي</a> |
      <a href="assets/links/About.html">حول الموقع</a> |
      <a href="assets/links/privacy.html">سياسة الخصوصية</a>
    </div>
    
    <p>منشئ هوية التلميذ العراقي 2025 &copy;| جميع الحقوق محفوظة.</p>
  </footer>
  
  
  <script src="assets/js/html2canvas.min.js"></script>
  <script src="assets/js/header.js"></script>
  <script src="assets/js/script.js"></script>
  <script src="assets/js/sw.js"></script>

  <script>
    (function() {
      const faqButtons = Array.from(document.querySelectorAll('.faq-question'));
      
      // مساعدة: ضبط الحالة الابتدائية لجميع الألواح
      document.querySelectorAll('.faq-answer').forEach(panel => {
        panel.style.maxHeight = null; // ابدأ مغلقاً
        panel.setAttribute('aria-hidden', 'true');
      });
      
      // دالة فتح العنصر (مع جعل max-height none بعد انتهاء التحريك)
      function openPanel(btn, panel) {
        btn.setAttribute('aria-expanded', 'true');
        panel.setAttribute('aria-hidden', 'false');
        
        // ضع ارتفاع البداية (صفحة قد تكون مفتوحة مسبقاً)
        // حصر: إذا كانت القيمة currently 'none' فهذا يعني أنها مرنة - نريد قيمة رقمية للانتقال
        // لذلك نستعمل scrollHeight كقيمة البداية
        panel.style.maxHeight = panel.scrollHeight + 'px';
        
        // بعد انتهاء الانتقال: اجعل maxHeight مرن (none) ليقبل أي تغيير لاحق في المحتوى بدون قص
        const onOpenTransitionEnd = function(e) {
          if (e.propertyName === 'max-height') {
            // نضع none للسماح بتغيّر الارتفاع دون قص (هذا يمنع مشكلة الخط الذي يحمل لاحقًا)
            panel.style.maxHeight = 'none';
            panel.removeEventListener('transitionend', onOpenTransitionEnd);
          }
        };
        panel.addEventListener('transitionend', onOpenTransitionEnd);
        
        btn.classList.add('open');
      }
      
      // دالة إغلاق العنصر (نحتاج بداية رقمية ثم نتحول لـ 0)
      function closePanel(btn, panel) {
        btn.setAttribute('aria-expanded', 'false');
        
        // إذا كانت maxHeight حالياً 'none' (مرنة) — نحتاج تحويلها لقيمة رقمية مساوية للارتفاع الفعلي
        // نستخدم getBoundingClientRect()/scrollHeight لحساب القيمة الحالية
        const currentHeight = panel.getBoundingClientRect().height;
        // ضع القيمة الحالية كنقطة بداية للانتقال
        panel.style.maxHeight = currentHeight + 'px';
        
        // في الإطار التالي نختزلها إلى صفر لعمل الانتقال
        requestAnimationFrame(() => {
          panel.style.maxHeight = '0px';
        });
        
        const onCloseTransitionEnd = function(e) {
          if (e.propertyName === 'max-height') {
            panel.setAttribute('aria-hidden', 'true');
            // تنظيف: إزالة قيمة maxHeight لترك CSS يتحكم بداية من جديد
            panel.style.maxHeight = null;
            panel.removeEventListener('transitionend', onCloseTransitionEnd);
          }
        };
        panel.addEventListener('transitionend', onCloseTransitionEnd);
        
        btn.classList.remove('open');
      }
      
      // اضف event listeners للأزرار
      faqButtons.forEach(btn => {
        const panelId = btn.getAttribute('aria-controls');
        const panel = document.getElementById(panelId);
        if (!panel) return;
        
        // بدءًا من هنا نريد سلوك toggle
        btn.addEventListener('click', function() {
          const expanded = this.getAttribute('aria-expanded') === 'true';
          if (expanded) {
            closePanel(this, panel);
          } else {
            document.querySelectorAll('.faq-question[aria-expanded="true"]').forEach(openBtn => {
              if (openBtn !== this) {
                const otherPanel = document.getElementById(openBtn.getAttribute('aria-controls'));
                closePanel(openBtn, otherPanel);
              }
            });
            openPanel(this, panel);
          }
        });
        
        // دعم لوحة المفاتيح
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
          }
        });
        
        // ResizeObserver: اذا تغير محتوى اللوحة اثناء كونها مفتوحة ونلمس ارتفاعاً جديداً
        if ('ResizeObserver' in window) {
          const ro = new ResizeObserver(() => {
            // إذا كانت اللوحة مفتوحة حالياً
            if (btn.getAttribute('aria-expanded') === 'true') {
              // إذا كانت maxHeight = 'none' فلا حاجة لتعديل (ستتكيف تلقائياً).
              // لكن إذا كانت قيمة رقمية (مثلاً أثناء عملية الإغلاق) نحدثها لتجنب قطع المحتوى
              if (panel.style.maxHeight && panel.style.maxHeight !== 'none') {
                // ضع ارتفاع جديد مطابقاً للـ scrollHeight
                panel.style.maxHeight = panel.scrollHeight + 'px';
              }
            }
          });
          ro.observe(panel);
        }
      });
      
      // عندما تنتهي خطوط الويب من التحميل، إذا كان هناك ألواح مفتوحة برمجياً ضمن حالة رقمية -> نجدد ارتفاعها
      if (document.fonts && typeof document.fonts.ready !== 'undefined') {
        document.fonts.ready.then(() => {
          document.querySelectorAll('.faq-answer').forEach(panel => {
            const prevBtn = panel.previousElementSibling && panel.previousElementSibling.querySelector('.faq-question');
            if (prevBtn && prevBtn.getAttribute('aria-expanded') === 'true') {
              // إذا كانت قيمة maxHeight رقمية (ليست none) حدّثها
              if (panel.style.maxHeight && panel.style.maxHeight !== 'none') {
                panel.style.maxHeight = panel.scrollHeight + 'px';
              }
            }
          });
        }).catch(() => { /* لا نفعل شيئاً إذا فشل */ });
      }
      
      // تأكد من أن عناصر كانت مفتوحة سابقاً (مثلاً من حفظ حالة) تعرض بشكل صحيح عند التحميل
      window.addEventListener('load', () => {
        document.querySelectorAll('.faq-answer').forEach(panel => {
          const prevBtn = panel.previousElementSibling && panel.previousElementSibling.querySelector('.faq-question');
          if (prevBtn && prevBtn.getAttribute('aria-expanded') === 'true') {
            // ضع ارتفاعاً و انتظر انتهاء الانتقال ثم حول إلى none
            panel.style.maxHeight = panel.scrollHeight + 'px';
            const onOpenTransitionEnd = function(e) {
              if (e.propertyName === 'max-height') {
                panel.style.maxHeight = 'none';
                panel.removeEventListener('transitionend', onOpenTransitionEnd);
              }
            };
            panel.addEventListener('transitionend', onOpenTransitionEnd);
            panel.setAttribute('aria-hidden', 'false');
          } else {
            panel.style.maxHeight = null;
            panel.setAttribute('aria-hidden', 'true');
          }
        });
      });
      
    })();
  </script>
  
</body>

</html>